df[df$iteration == 1, ][1,1]
df[df$iteration == 1, ][1,1] / v
v <- 10000
df[df$iteration == 1, ][1,1] / v
df[df$iteration == 1, ][1,1] / v * 24
df[df$iteration == 1, ][1,2]
df[df$iteration == 1, ][2,1]
1:length(df$iteration)
unique(df$iteration)
for (ii in unique(df$iteration)){
n.drain <- nrow(df[df$iteration == ii, ]) # number of drains to end point
time <- c()
for (i in 1:n.drain){
time[i] <- df[df$iteration == ii, ][i,1] / v * 24
}
df[df$iteration == ii, ]$time <- time
}
time <- c()
for (i in 1:n.drain){
time[i] <- df[df$iteration == ii, ][i,1] / v * 24
}
df[df$iteration == 1, ]$time
df[df$iteration == 1, ]
df[df$iteration == 1, ]$time
time <- c()
for (i in unique(df$iteration)){
time[i] <- df[df$iteration == i, ][i,1] / v * 24
}
df %>% filter(., iteration == 1)
df1 <- df[df$iteration == i, ]
df1 <- df[df$iteration == 1, ]
df1
df1$length[1] / v * 24
df1$time <- df1$length[1] / v * 24 #ii
df1
df1 <- df[df$iteration == 1, ]
for (ii in 1:nrow(df1)) {
df1$time[1, ] <- df1$length[1] / v * 24 #ii
}
df1 <- df[df$iteration == 1, ]
for (ii in 1:nrow(df1)) {
df1$time[i, ] <- df1$length[i] / v * 24 #ii
}
df1$length[1]
df1$time[1, ]
df1$time[1, ] <- df1$length[1] / v * 24
df1 <- df[df$iteration == 1, ]
df1$time <- NA
for (ii in 1:nrow(df1)) {
df1$time[1, ] <- df1$length[1] / v * 24 #ii
}
df1
df1$time[1, ] <- df1$length[1] / v * 24
df1$time[1, ]
df1$time[1]
df1$time[1] <- df1$length[1] / v * 24 #ii
df1
for (ii in 1:nrow(df1)) {
df1$time[ii] <- df1$length[i] / v * 24 #ii
}
View(df1)
1:nrow(df1)
df1 <- df[df$iteration == 1, ]
df1$time <- NA
for (ii in 1:nrow(df1)) {
df1$time[ii] <- df1$length[i] / v * 24 #ii
}
df1
for (ii in 1:nrow(df1)) {
df1$time[ii] <- df1$length[ii] / v * 24 #ii
}
df1
df$length / v * 24
df$time <- df$length / v * 24
View(df)
df1
View(dist2sewagedf)
dist2sewagedf$time <- (dist2sewagedf$distance[1] / v.d0)  * 24
df$time <- df$length / v * 24
View(dist2sewagedf)
dist2sewagedf$time <- (dist2sewagedf$distance / v.d0)  * 24
n.pop
n.pop <- neighb$p_total
patho.count(N.pop=n.pop, beta=0.04,recovery=1/30,death=0.001,birth=0.001,days=1000,N.shed=10^7,r=5,p=1/3)
source(paste0(getwd(), "/", "endemic.R"))
patho.count(N.pop=n.pop, beta=0.04,recovery=1/30,death=0.001,birth=0.001,days=1000,N.shed=10^7,r=5,p=1/3)
n.pop
1:length(n.pop)
list <- list()
n.pop <- neighb$p_total
for (i in 1:length(n.pop)){
list[i] <- patho.count(N.pop=n.pop[i], beta=0.04,recovery=1/30,death=0.001,birth=0.001,days=1000,N.shed=10^7,r=5,p=1/3)
}
warnings()
n.pop[i]
patho.count(N.pop=n.pop[i], beta=0.04,recovery=1/30,death=0.001,birth=0.001,days=1000,N.shed=10^7,r=5,p=1/3)
p.neighb <- c()
list <- list()
p.neighb <- patho.count(N.pop=n.pop[i], beta=0.04,recovery=1/30,death=0.001,birth=0.001,days=1000,N.shed=10^7,r=5,p=1/3)
for (i in 1:length(n.pop)){
p.neighb <- patho.count(N.pop=n.pop[i], beta=0.04,recovery=1/30,death=0.001,birth=0.001,days=1000,N.shed=10^7,r=5,p=1/3)
list[i] <- p.neighb
}
list[1]
p.neighb <- c()
list <- list()
n.pop <- neighb$p_total
for (i in 1:length(n.pop)){
p.neighb <- patho.count(N.pop=n.pop[i], beta=0.04,recovery=1/30,death=0.001,birth=0.001,days=1000,N.shed=10^7,r=5,p=1/3)
list[[i]] <- p.neighb
}
p.neighb <- c()
p.neighb.list <- list()
n.pop <- neighb$p_total
for (i in 1:length(n.pop)){
p.neighb <- patho.count(N.pop=n.pop[i], beta=0.04,recovery=1/30,death=0.001,birth=0.001,days=1000,N.shed=10^7,r=5,p=1/3)
p.neighb.list[[i]] <- p.neighb
}
ex_decay(p.neighb.list[i], t)
p.neighb.list[i]
ex_decay(p.neighb.list[[i]], t)
ex_decay(p.neighb.list[i], t)
log(0.001)/-24)
(log(0.001)/-24)
time = 2
-decay_rate * time
decay_rate = (log(0.001)/-24)
-decay_rate * time
exp(-decay_rate * time)
p.neighb.list[i]
ex_decay(11670207, t)
ex_decay(11670207, 1)
ex_decay(p.neighb.list[i], 1)
ex_decay(p.neighb.list[1], 1)
p.neighb.list[1]
p.neighb.list[1][1]
unlist(p.neighb.list)
p.neighb.list[[1]][1]
1:length(p.neighb.list[1]
)
1:length(p.neighb.list[1])
length(p.neighb.list[1])
lengths(p.neighb.list[1])
1:lengths(p.neighb.list[1])
for (i in 1:lengths(p.neighb.list[1])) {
ex_decay(p.neighb.list[[1]][i], 1)
}
hi <- c()
for (i in 1:lengths(p.neighb.list[1])) {
hi <- ex_decay(p.neighb.list[[1]][i], 1)
}
hi <- c()
for (i in 1:lengths(p.neighb.list[1])) {
hi[i] <- ex_decay(p.neighb.list[[1]][i], 1)
}
length(p.neighb.list)
hy <- c()
for (u in 1:length(p.neighb.list)){
hi <- c()
for (i in 1:lengths(p.neighb.list[1])) {
hi[i] <- ex_decay(p.neighb.list[[1]][i], 1)
}
hy[[i]] <- hi
}
hy
hy <- c()
for (u in 1:length(p.neighb.list)){
hi <- c()
for (i in 1:lengths(p.neighb.list[u])) {
hi[i] <- ex_decay(p.neighb.list[[u]][i], 1)
}
hy[[u]] <- hi
}
View(df)
View(df)
View(df)
View(df)
sum(df$time[df$iteration == 1 ]
)
sum(df$time[df$iteration == 1 ])
hy <- c()
for (u in 1:length(p.neighb.list)){
# for one neighborhood
hi <- c()
for (i in 1:lengths(p.neighb.list[u])) {
hi[i] <- ex_decay(p.neighb.list[[u]][i], sum(df$time[df$iteration == u ]) )
}
# for all neighborhoods
hy[[u]] <- hi
}
time.total <- c()
for (u in 1:length(p.neighb.list)){
# for one neighborhood
hi <- c()
for (i in 1:lengths(p.neighb.list[u])) {
hi[i] <- ex_decay(p.neighb.list[[u]][i], sum(df$time[df$iteration == u ]) )
time.total <- sum(df$time[df$iteration == u ])
}
# for all neighborhoods
hy[[u]] <- hi
}
hy <- c()
time.total <- c()
for (u in 1:length(p.neighb.list)){
# for one neighborhood
hi <- c()
for (i in 1:lengths(p.neighb.list[u])) {
hi[i] <- ex_decay(p.neighb.list[[u]][i], sum(df$time[df$iteration == u ]) )
time.total[i] <- sum(df$time[df$iteration == u ])
}
# for all neighborhoods
hy[[u]] <- hi
}
sum(df$time[df$iteration == 1 ])
time.total[1] <- sum(df$time[df$iteration == 1 ])
time.total <- c()
time.total[1] <- sum(df$time[df$iteration == 1 ])
time.total[2] <- sum(df$time[df$iteration == 2 ])
sum(df$time[df$iteration == 2 ])
hy <- c()
time.total <- c()
for (u in 1:length(p.neighb.list)){
# for one neighborhood
hi <- c()
for (i in 1:lengths(p.neighb.list[u])) {
hi[i] <- ex_decay(p.neighb.list[[u]][i], sum(df$time[df$iteration == u ]) )
}
time.total[u] <- sum(df$time[df$iteration == u ])
# for all neighborhoods
hy[[u]] <- hi
}
View(neighb)
liquid.waste
liquid.waste <- neighb$waste_liquid_sewage
liquid.waste
p.neighb.list[1]
p.neighb.list[1] *liquid.waste[1]
liquid.waste[1]
p.neighb.list[1] * 0.02
p.neighb.list[1]
40713245 * 0.02
p.neighb.list[1] * 0.02
p.neighb.list[1] * liquid.waste
p.neighb.list[[1]] * liquid.waste[1]
p.neighb.list[[1]] * 0.02
N0 <- p.neighb.list[[1]] * liquid.waste[1]
View(dist2sewagedf)
dist2sewagedf$time[1]
1:length(p.neighb.list)
N0 <- c()
for (i in 1:length(p.neighb.list)) {
N0[1] <- p.neighb.list[[1]] * liquid.waste[1]
decay.d0 <- ex_decay(N0, dist2sewagedf$time[1])
}
N0 <- c()
for (i in 1:length(p.neighb.list)) {
N0[i] <- p.neighb.list[[i]] * liquid.waste[i]
decay.d0 <- ex_decay(N0, dist2sewagedf$time[i])
}
decay.d0 <- c()
for (i in 1:length(p.neighb.list)) {
N0[i] <- p.neighb.list[[i]] * liquid.waste[i]
decay.d0[i] <- ex_decay(N0, dist2sewagedf$time[i])
}
decay.d0[i] <- ex_decay(N0[i], dist2sewagedf$time[i])
N0 <- c()
decay.d0 <- c()
for (i in 1:length(p.neighb.list)) {
N0[i] <- p.neighb.list[[i]] * liquid.waste[i]
decay.d0[i] <- ex_decay(N0[i], dist2sewagedf$time[i])
}
warnings()
N0 <- c()
decay.d0 <- c()
N0[1] <- p.neighb.list[[1]] * liquid.waste[1]
p.neighb.list[[1]] * liquid.waste[1]
dist2sewagedf$time[1]
N0[1]
N0 <- p.neighb.list[[1]] * liquid.waste[1]
1:length(p.neighb.list)
p.neighb.list[1]
length(p.neighb.list[1])
1:lengths(p.neighb.list[1])
p.neighb.list[[1]] * liquid.waste[1]
1:length(p.neighb.list)
N0 <- c()
N0[1] <- p.neighb.list[[1]] * liquid.waste[1]
N0 <- p.neighb.list[[1]] * liquid.waste[1]
u=1
i=1
decay.1.neighb <- c()
decay.1.neighb[i] <- ex_decay(p.neighb.list[[u]][i], sum(df$time[df$iteration == u ]) )
ex_decay(p.neighb.list[[u]][i], sum(df$time[df$iteration == u ]) )
N0[[1]] <- p.neighb.list[[1]] * liquid.waste[1]
N0 <- list()
N0[[1]] <- p.neighb.list[[1]] * liquid.waste[1]
N0 <- list()
N0[[1]] <- p.neighb.list[[1]] * liquid.waste[1]
ex_decay(N0[1], dist2sewagedf$time[1])
N0[[1]]
N0[[1]][1]
ex_decay(N0[[1]][1], dist2sewagedf$time[1])
dist2sewagedf$time[1]
dist2sewagedf$time[1]
ex_decay(N0[[1]][1], dist2sewagedf$time[1])
dist2sewagedf$time[1]
decay.d0[1] <- ex_decay(N0[[1]][1], 14.91347)
decay.d0[1] <- ex_decay(N0[[1]][1], 15)
N0[[1]][1]
decay.d0[1] <- ex_decay(814264.9, 14.91347)
decay.d0[1] <- ex_decay(814264, 14.91347)
p.neighb.list[[1]] * liquid.waste[1]
round(p.neighb.list[[1]] * liquid.waste[1])
ex_decay(N0[[1]][1], dist2sewagedf$time[1])
N0[[1]] <- round(p.neighb.list[[1]] * liquid.waste[1])
ex_decay(N0[[1]][1], dist2sewagedf$time[1])
1:lengths(p.neighb.list[1])
1:length(p.neighb.list)
N0[[1]] <- round(p.neighb.list[[1]] * liquid.waste[1])
N0
N00 <- c()
N00[1] <- ex_decay(N0[[1]][1], dist2sewagedf$time[1])
N00
round(p.neighb.list[[1]] * liquid.waste[1])
N0[[1]] <- round(p.neighb.list[[1]] * liquid.waste[1])
N0 <- list()
N0[[1]] <- round(p.neighb.list[[1]] * liquid.waste[1])
N0[[2]] <- round(p.neighb.list[[2]] * liquid.waste[2])
1:lengths(p.neighb.list[1])
p.neighb.list
decay.d0 <- c()
for (v in 1:length(p.neighb.list)){
N0 <- list()
N00 <- c()
for (i in 1:lengths(p.neighb.list[i])) {
N0[[v]] <- round(p.neighb.list[[v]] * liquid.waste[v])
N00[i] <- ex_decay(N0[[v]][i], dist2sewagedf$time[v])
}
decay.d0[[v]] <- N00
}
1:length(p.neighb.list)
decay.d0 <- c()
for (v in 1:length(p.neighb.list)){
N0 <- list()
N00 <- c()
for (i in 1:lengths(p.neighb.list[v])) {
N0[[v]] <- round(p.neighb.list[[v]] * liquid.waste[v])
N00[i] <- ex_decay(N0[[v]][i], dist2sewagedf$time[v])
}
decay.d0[[v]] <- N00
}
decay.d0[1]
p.neighb.list[[1]][1]
decay.d0[[1]]
decay.d0[[1]][1]
p.neighb.list[[1]][1] * neighb$waste_liquid_sewage[1]
decay.d0[[1]][1]
pathogens <- p.neighb.list[[1]][1] * neighb$waste_liquid_sewage[1]
ex_decay(pathogens, dist2sewagedf$time[1])
pathogens <- round(p.neighb.list[[1]][1] * neighb$waste_liquid_sewage[1])
ex_decay(pathogens, dist2sewagedf$time[1])
pathogens <- ex_decay(pathogens, dist2sewagedf$time[1])
pathogens == decay.d0[[1]][1]
decay.d0[[1]][1]
pathogens <- round(p.neighb.list[[1]][1] * neighb$waste_liquid_sewage[1])
pathogens <- ex_decay(pathogens, dist2sewagedf$time[1])
pathogens == decay.d0[[1]][1]
decay.d0[[1]][1]
pathogens
pathogens <- round(p.neighb.list[[1]][1] * neighb$waste_liquid_sewage[1])
pathogens <- ex_decay(pathogens, dist2sewagedf$time[1])
pathogens
decay.d0[[1]][1]
pathogens <- round(p.neighb.list[[1]][1] * neighb$waste_liquid_sewage[1])
pathogens <- ex_decay(pathogens, dist2sewagedf$time[1])
pathogens
decay.d0[[1]][1]
decay.d0 <- c()
for (v in 1:length(p.neighb.list)){
N0 <- list()
N00 <- c()
for (i in 1:lengths(p.neighb.list[v])) {
N0[[v]] <- round(p.neighb.list[[v]] * liquid.waste[v])
N00[i] <- ex_decay(N0[[v]][i], dist2sewagedf$time[v])
}
decay.d0[[v]] <- N00
}
1:lengths(p.neighb.list[71])
round(p.neighb.list[[71]] * liquid.waste[71])
N0[[71]] <- round(p.neighb.list[[71]] * liquid.waste[71])
decay.neighb <- c()
time.total <- c()
for (u in 1:length(p.neighb.list)){
# for one neighborhood
decay.1.neighb <- c()
for (i in 1:lengths(p.neighb.list[u])) {
decay.1.neighb[i] <- ex_decay(p.neighb.list[[u]][i], sum(df$time[df$iteration == u ]) )
}
# time total for each point to reach endpoint in hours
time.total[u] <- sum(df$time[df$iteration == u ])
# for all neighborhoods
decay.neighb[[u]] <- decay.1.neighb
}
decay.d0 <- c()
N0 <- list()
for (v in 1:length(p.neighb.list)){
N00 <- c()
for (i in 1:lengths(p.neighb.list[71])) {
N0[[71]] <- round(p.neighb.list[[71]] * liquid.waste[71])
N00[i] <- ex_decay(N0[[v]][i], dist2sewagedf$time[v])
}
decay.d0[[v]] <- N00
}
decay.d0 <- c()
N0 <- list()
for (v in 1:length(p.neighb.list)){
N00 <- c()
for (i in 1:lengths(p.neighb.list[v])) {
N0[[v]] <- round(p.neighb.list[[v]] * liquid.waste[v])
N00[i] <- ex_decay(N0[[v]][i], dist2sewagedf$time[v])
}
decay.d0[[v]] <- N00
}
pathogens <- round(p.neighb.list[[1]][1] * neighb$waste_liquid_sewage[1])
pathogens <- ex_decay(pathogens, dist2sewagedf$time[1])
pathogens
decay.d0[[1]][1]
decay.d0 <- c()
for (v in 1:length(p.neighb.list)){
N0 <- list()
N00 <- c()
for (i in 1:lengths(p.neighb.list[v])) {
N0[[v]] <- round(p.neighb.list[[v]] * liquid.waste[v])
N00[i] <- ex_decay(N0[[v]][i], dist2sewagedf$time[v])
}
decay.d0[[v]] <- N00
}
N0 <- list()
decay.d0 <- c()
for (v in 1:length(p.neighb.list)){
N00 <- c()
for (i in 1:lengths(p.neighb.list[v])) {
N0[[v]] <- round(p.neighb.list[[v]] * liquid.waste[v])
N00[i] <- ex_decay(N0[[v]][i], dist2sewagedf$time[v])
}
decay.d0[[v]] <- N00
}
round(p.neighb.list[[1]] * liquid.waste[1])
N0[[1]] <- round(p.neighb.list[[1]] * liquid.waste[1])
N0 <- list()
N0[[1]] <- round(p.neighb.list[[1]] * liquid.waste[1])
N0[[2]] <- round(p.neighb.list[[1]] * liquid.waste[1])
N0[[3]] <- round(p.neighb.list[[1]] * liquid.waste[1])
N00[1] <- ex_decay(N0[[1]][1], dist2sewagedf$time[1])
N00 <- c()
N00[1] <- ex_decay(N0[[1]][1], dist2sewagedf$time[1])
N00[1] <- ex_decay(N0[[1]][2], dist2sewagedf$time[1])
N00[2] <- ex_decay(N0[[1]][1], dist2sewagedf$time[1])
decay.d0[[1]] <- N00
decay.d0 <- c()
N0 <- list()
for (v in 1:length(p.neighb.list)){
N00 <- c()
for (i in 1:lengths(p.neighb.list[v])) {
N0[[v]] <- round(p.neighb.list[[v]] * liquid.waste[v])
N00[i] <- ex_decay(N0[[v]][i], dist2sewagedf$time[v])
}
decay.d0[[v]] <- N00
}
decay.d0 <- c()
for (v in 1:length(p.neighb.list)){
N0 <- list()
N00 <- c()
for (i in 1:lengths(p.neighb.list[v])) {
N0[[v]] <- round(p.neighb.list[[v]] * liquid.waste[v])
N00[i] <- ex_decay(N0[[v]][i], dist2sewagedf$time[v])
}
decay.d0[[v]] <- N00
}
decay.d0 <- c()
for (v in 1:length(p.neighb.list)){
N0 <- list()
N00 <- c()
N0[[v]] <- round(p.neighb.list[[v]] * liquid.waste[v])
for (i in 1:lengths(p.neighb.list[v])) {
N00[i] <- ex_decay(N0[[v]][i], dist2sewagedf$time[v])
}
decay.d0[[v]] <- N00
}
decay.d0 <- c()
for (v in 1:length(p.neighb.list)){
N0 <- list()
N00 <- c()
N0[[v]] <- round(p.neighb.list[[v]] * liquid.waste[v])
for (i in 1:lengths(p.neighb.list[v])) {
N00[i] <- ex_decay(N0[[v]][i], dist2sewagedf$time[v])
}
decay.d0[[v]] <- N00
}
decay.d0[[1]][1]
decay.d0 <- c()
for (v in 1:length(p.neighb.list)){
N0 <- list()
N00 <- c()
N0[[v]] <- round(p.neighb.list[[v]] * liquid.waste[v])
for (i in 1:lengths(p.neighb.list[v])) {
N00[i] <- ex_decay(N0[[v]][i], dist2sewagedf$time[v])
}
decay.d0[[v]] <- N00
}
decay.d0[[1]][1]
p.neighb.list <- decay.d0
